class KnowledgeBase {
  static const Map<String, String> _knowledge = {
    'upitra': '''
Universitas Pignatelli Triputra (UPITRA) adalah universitas yang berlokasi di Surakarta, Jawa Tengah, dan dikelola oleh Yayasan Santo Yosef Maria Pignatelli. UPITRA menerapkan konsep "Link and Match" dengan dunia industri untuk menghasilkan lulusan yang siap kerja dan relevan dengan kebutuhan pasar. Universitas ini memiliki hubungan erat dengan Triputra Group dan Persada Capital Investama.

UPITRA berkomitmen menyelenggarakan pendidikan transformatif yang mengintegrasikan kedalaman pengetahuan keilmuan, kedalaman spiritualitas, kemampuan beradaptasi, kemampuan berkomunikasi, kerendahan hati, dan berbelarasa pada sesama maupun lingkungan.
    ''',

    'universitas_pignatelli_triputra': '''
Universitas Pignatelli Triputra (UPITRA) adalah universitas yang berlokasi di Jl. Duwet I, Karangasem, Kec. Laweyan, Surakarta, Jawa Tengah. Dikelola oleh Yayasan Santo Yosef Maria Pignatelli Surakarta. UPITRA mengusung konsep "Link and Match" dengan dunia industri dan berkomitmen menghasilkan lulusan yang siap kerja.
    ''',

    'visi_misi': '''
Visi UPITRA: Universitas bereputasi unggul, berorientasi global, dan bersemangat kebhinekaan demi Indonesia yang semakin bermartabat.

UPITRA menyelenggarakan pendidikan transformatif dengan tri dharma perguruan tinggi: pendidikan, penelitian, dan pengabdian kepada masyarakat.
    ''',

    'nilai_nilai': '''
Nilai-nilai UPITRA:
1. Menjalani hidup dengan transparan dan jujur
2. Menghasilkan karya yang lebih dari yang diharapkan dalam situasi apapun
3. Menempatkan kemanusiaan dan tujuan yang lebih mulia di atas kepentingan pribadi
4. Menjadi pribadi yang rendah hati, membuka diri, dan terus memperbaiki diri
    ''',

    'logo_makna': '''
Logo UPITRA memiliki bentuk dasar kubus dengan tiga sisi berwarna biru bergradasi. Huruf P (inisial Pignatelli) membentuk deformasi hexagonal yang menciptakan transformasi dari dwi matra ke tri matra.

Makna Logo:
- Kubus melambangkan kekokohan dan kesempurnaan UPITRA sebagai perguruan tinggi dengan fondasi kokoh
- Transformasi lintas dimensi melambangkan pengalaman pendidikan transformatif
- Warna biru melambangkan kedalaman, tanggung jawab, dan kepercayaan
- Tiga sisi kubus menunjukkan tri dharma: pendidikan, penelitian, pengabdian masyarakat
- Gradasi biru tua ke biru muda menunjukkan transformasi gradual menuju perguruan tinggi modern
    ''',

    'link_and_match': '''
Konsep "Link and Match" UPITRA menekankan kolaborasi antara institusi pendidikan dan dunia usaha dalam:
1. Perancangan kurikulum yang relevan dengan kebutuhan industri
2. Program magang dan praktik kerja
3. Pelatihan keterampilan sesuai permintaan pasar
4. Penelitian yang mendukung pengembangan industri
5. Kemitraan strategis dengan perusahaan

Dengan pendekatan ini, UPITRA berperan dalam mencetak tenaga kerja berkualitas dan menjadi mitra aktif dalam mendorong pertumbuhan ekonomi dan inovasi di industri.
    ''',

    'program_studi': '''
UPITRA memiliki 8 program studi:

Program Sarjana (S1):
1. Akuntansi
2. Manajemen 
3. Informatika
4. Sistem Informasi
5. Rekayasa Perangkat Lunak

Program Diploma (D3):
1. Akuntansi
2. Manajemen Keuangan
3. Bahasa Inggris

Semua program studi dirancang dengan konsep Link and Match untuk menghasilkan lulusan yang siap kerja dan relevan dengan kebutuhan industri.
    ''',

    'triputra_group': '''
Triputra Group adalah mitra strategis Universitas Pignatelli Triputra (UPITRA) yang mendukung konsep "Link and Match" dalam pendidikan tinggi. Hubungan ini memungkinkan UPITRA untuk mengintegrasikan kebutuhan industri nyata dalam kurikulum dan memberikan peluang magang serta kerja bagi mahasiswa.
    ''',

    'persada_capital_investama': '''
Persada Capital Investama adalah mitra investasi dari Universitas Pignatelli Triputra (UPITRA) yang turut mendukung pengembangan konsep "Link and Match" dengan dunia industri.
    ''',

    'lokasi_kampus': '''
UPITRA berlokasi di:
Alamat: Jl. Duwet I, Karangasem, Kec. Laweyan, Surakarta, Jawa Tengah

Jam Operasional Admisi: Senin - Jumat, 08:00 - 17:00 WIB

Kampus ini strategis berada di Surakarta yang merupakan kota budaya dan pendidikan di Jawa Tengah.
    ''',

    'yayasan': '''
UPITRA dikelola oleh Yayasan Santo Yosef Maria Pignatelli Surakarta. Yayasan ini berkomitmen mengembangkan pendidikan tinggi berkualitas dengan nilai-nilai spiritual dan kemanusiaan yang kuat.
    ''',

    'pendidikan_transformatif': '''
UPITRA menyelenggarakan pendidikan transformatif yang mengintegrasikan:
1. Kedalaman pengetahuan keilmuan
2. Kedalaman spiritualitas
3. Kemampuan beradaptasi
4. Kemampuan berkomunikasi
5. Kerendahan hati
6. Berbelarasa pada sesama dan lingkungan

Pendidikan transformatif ini bertujuan menghasilkan lulusan yang tidak hanya kompeten secara akademik tetapi juga memiliki karakter yang kuat dan siap menghadapi tantangan global.
    ''',

    'tri_dharma': '''
UPITRA menjalankan tri dharma perguruan tinggi secara produktif:
1. Pendidikan - Menyelenggarakan program pembelajaran berkualitas
2. Penelitian - Mengembangkan riset yang relevan dengan kebutuhan industri
3. Pengabdian kepada Masyarakat - Berkontribusi dalam pembangunan masyarakat

Ketiga aspek ini diintegrasikan dalam konsep Link and Match dengan dunia industri.
    ''',

    'keunggulan_upitra': '''
Keunggulan UPITRA:
1. Konsep Link and Match dengan dunia industri
2. Kemitraan strategis dengan Triputra Group
3. Pendidikan transformatif yang holistik
4. Kurikulum yang relevan dengan kebutuhan pasar
5. Program magang dan praktik kerja terintegrasi
6. Lokasi strategis di Surakarta
7. Nilai-nilai spiritualitas yang kuat
8. Continuous improvement dalam kualitas pendidikan
    ''',

    'pmb_informasi': '''
Penerimaan Mahasiswa Baru UPITRA:
- Periode pendaftaran: 2025/2026
- Tersedia berbagai gelombang pendaftaran
- Informasi lengkap dapat diakses melalui website PMB UPITRA
- Admisi beroperasi Senin-Jumat jam 08:00-17:00 WIB
    ''',
  };

  static const List<String> _keywords = [
    'upitra',
    'universitas pignatelli triputra',
    'link and match',
    'triputra group',
    'persada capital investama',
    'transformasi upitra',
    'kampus',
    'pendidikan tinggi',
    'industri',
    'lulusan',
    'kurikulum',
    'magang',
    'pelatihan',
    'penelitian',
    'surakarta',
    'jawa tengah',
    'yayasan santo yosef',
    'pignatelli',
    'visi misi',
    'nilai',
    'logo',
    'program studi',
    'sarjana',
    'diploma',
    'akuntansi',
    'manajemen',
    'informatika',
    'sistem informasi',
    'rekayasa perangkat lunak',
    'bahasa inggris',
    'tri dharma',
    'pendidikan transformatif',
    'pmb',
    'penerimaan mahasiswa baru',
    'admisi',
    'lokasi',
    'alamat',
    'jam operasional',
    'keunggulan',
    'karakteristik',
    'filosofi',
  ];

  /// Searches for relevant knowledge based on the query
  static String? searchKnowledge(String query) {
    String lowerQuery = query.toLowerCase();

    // Direct keyword match
    for (String key in _knowledge.keys) {
      if (lowerQuery.contains(key.replaceAll('_', ' '))) {
        return _knowledge[key];
      }
    }

    // Specific keyword search with priority
    if (lowerQuery.contains('visi') || lowerQuery.contains('misi')) {
      return _knowledge['visi_misi'];
    }

    if (lowerQuery.contains('nilai') || lowerQuery.contains('value')) {
      return _knowledge['nilai_nilai'];
    }

    if (lowerQuery.contains('logo') || lowerQuery.contains('makna')) {
      return _knowledge['logo_makna'];
    }

    if (lowerQuery.contains('program studi') ||
        lowerQuery.contains('jurusan') ||
        lowerQuery.contains('fakultas')) {
      return _knowledge['program_studi'];
    }

    if (lowerQuery.contains('lokasi') ||
        lowerQuery.contains('alamat') ||
        lowerQuery.contains('surakarta')) {
      return _knowledge['lokasi_kampus'];
    }

    if (lowerQuery.contains('pmb') ||
        lowerQuery.contains('pendaftaran') ||
        lowerQuery.contains('mahasiswa baru')) {
      return _knowledge['pmb_informasi'];
    }

    if (lowerQuery.contains('keunggulan') || lowerQuery.contains('kelebihan')) {
      return _knowledge['keunggulan_upitra'];
    }

    if (lowerQuery.contains('yayasan') || lowerQuery.contains('santo yosef')) {
      return _knowledge['yayasan'];
    }

    if (lowerQuery.contains('tri dharma') || lowerQuery.contains('tridarma')) {
      return _knowledge['tri_dharma'];
    }

    // General keyword search
    for (String keyword in _keywords) {
      if (lowerQuery.contains(keyword)) {
        // Return most relevant knowledge based on context
        if (keyword.contains('upitra') || keyword.contains('universitas')) {
          return _knowledge['upitra'];
        } else if (keyword.contains('link and match')) {
          return _knowledge['link_and_match'];
        } else if (keyword.contains('triputra')) {
          return _knowledge['triputra_group'];
        } else if (keyword.contains('program')) {
          return _knowledge['program_studi'];
        } else if (keyword.contains('transformatif')) {
          return _knowledge['pendidikan_transformatif'];
        }
      }
    }

    return null;
  }

  /// Enhanced prompt enhancement with better context selection
  static String enhancePromptWithKnowledge(String userInput) {
    String? primaryKnowledge = searchKnowledge(userInput);

    if (primaryKnowledge != null) {
      // Add additional context based on query type
      String additionalContext = '';
      String lowerInput = userInput.toLowerCase();

      // Add basic UPITRA info if not already included
      if (!primaryKnowledge.contains('Universitas Pignatelli Triputra') &&
          primaryKnowledge != _knowledge['upitra']) {
        additionalContext += '\n\nInformasi Dasar: ${_knowledge['upitra']}';
      }

      // Add program studi info for academic-related queries
      if ((lowerInput.contains('kuliah') ||
              lowerInput.contains('jurusan') ||
              lowerInput.contains('program')) &&
          primaryKnowledge != _knowledge['program_studi']) {
        additionalContext +=
            '\n\nProgram Studi: ${_knowledge['program_studi']}';
      }

      return '''
Context UPITRA: $primaryKnowledge$additionalContext

Pertanyaan Pengguna: $userInput

Jawablah berdasarkan konteks yang diberikan tentang UPITRA (Universitas Pignatelli Triputra). Jika pertanyaan tidak terkait dengan UPITRA atau tidak dapat dijawab dengan konteks yang ada, jawablah secara natural namun coba kaitkan dengan UPITRA jika memungkinkan. Gunakan bahasa Indonesia yang ramah dan informatif.
''';
    }

    return userInput;
  }

  /// Gets all available keywords for debugging/testing
  static List<String> getKeywords() => List.unmodifiable(_keywords);

  /// Gets all knowledge keys for debugging/testing
  static List<String> getKnowledgeKeys() => List.unmodifiable(_knowledge.keys);

  /// Gets specific knowledge by key
  static String? getKnowledgeByKey(String key) => _knowledge[key];

  /// Search knowledge with multiple results
  static List<String> searchMultipleKnowledge(String query) {
    List<String> results = [];
    String lowerQuery = query.toLowerCase();

    for (String key in _knowledge.keys) {
      String content = _knowledge[key]!.toLowerCase();
      if (content.contains(lowerQuery) ||
          lowerQuery.contains(key.replaceAll('_', ' '))) {
        results.add(_knowledge[key]!);
      }
    }

    return results;
  }
}
